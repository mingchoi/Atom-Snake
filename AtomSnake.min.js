(function(){var c,a,b=function(d,e){return function(){return d.apply(e,arguments)}};a=(function(){function d(e,l){var f,k,m,i,h,j,g;this.width=e;this.height=l;this.leds2d=[];k=0;for(m=i=0,j=this.height;0<=j?i<j:i>j;m=0<=j?++i:--i){this.leds2d.push([]);for(f=h=0,g=this.width;0<=g?h<g:h>g;f=0<=g?++h:--h){$("#atom-Snake-Game").append($('<div id="snake-Led-'+k+'" class="snake-Led"></div>'));this.leds2d[m].push(false);k++}$("#atom-Snake-Game").append($("<br>"))}}d.prototype.render=function(){var g,e,j,i,h,f;e=0;f=[];for(j=i=0,h=this.height;0<=h?i<h:i>h;j=0<=h?++i:--i){f.push((function(){var m,k,l;l=[];for(g=m=0,k=this.width;0<=k?m<k:m>k;g=0<=k?++m:--m){if(this.leds2d[j][g]===true){$("#snake-Led-"+e).addClass("snake-Led-On")}l.push(e++)}return l}).call(this))}return f};d.prototype.erase=function(){var g,e,j,i,h,f;e=0;f=[];for(j=i=0,h=this.height;0<=h?i<h:i>h;j=0<=h?++i:--i){f.push((function(){var m,k,l;l=[];for(g=m=0,k=this.width;0<=k?m<k:m>k;g=0<=k?++m:--m){this.leds2d[j][g]=false;$("#snake-Led-"+e).removeClass("snake-Led-On");l.push(e++)}return l}).call(this))}return f};d.prototype.drawPixel=function(e,g,f){if(f==null){f=true}return this.leds2d[g][e]=f};return d})();c=(function(){function d(g,f,e){var h=this;this.width=g;this.height=f;this.wall=e;this.countScore=b(this.countScore,this);this.flashing=b(this.flashing,this);this.updateGame=b(this.updateGame,this);this.screen=new a(this.width,this.height);$(window).keyup(function(i){if(i.keyCode===38){if(h.direction!==1){return h.direction=3}}else{if(i.keyCode===40){if(h.direction!==3){return h.direction=1}}else{if(i.keyCode===37){if(h.direction!==0){return h.direction=2}}else{if(i.keyCode===39){if(h.direction!==2){return h.direction=0}}}}}});$(".sbTop").click(function(){if(h.direction!==1){return h.direction=3}});$(".sbBottom").click(function(){if(h.direction!==3){return h.direction=1}});$(".sbLeft").click(function(){if(h.direction!==0){return h.direction=2}});$(".sbRight").click(function(){if(h.direction!==2){return h.direction=0}});this.startGame()}d.prototype.startGame=function(){this.snake=[[0,2]];this.direction=0;this.playing=true;this.genFood();return setTimeout(this.updateGame,500)};d.prototype.updateGame=function(n){var h,m,k,g,j,e,l,f;if(n===void 0){if(this.direction===0){j=[this.snake[0][0]+1,this.snake[0][1]]}else{if(this.direction===1){j=[this.snake[0][0],this.snake[0][1]+1]}else{if(this.direction===2){j=[this.snake[0][0]-1,this.snake[0][1]]}else{if(this.direction===3){j=[this.snake[0][0],this.snake[0][1]-1]}}}}}else{j=n}if(j[0]<0||j[0]>=this.width||j[1]<0||j[1]>=this.height){k=true}f=this.snake;for(e=0,l=f.length;e<l;e++){g=f[e];if(g[0]===j[0]&&g[1]===j[1]){m=true}}if(j[0]===this.food[0]&&j[1]===this.food[1]){h=true}if(k){if(this.wall){this.endGame()}else{if(j[0]<0){j[0]=this.width-1}else{if(j[1]<0){j[1]=this.height-1}else{if(j[0]>=this.width){j[0]=0}else{if(j[1]>=this.height){j[1]=0}}}}this.updateGame(j);return}}else{if(m){this.endGame()}else{if(h){this.snake.unshift(j);$("#eat")[0].play();if(this.snake.length===this.width*this.height){this.endGame()}else{this.genFood()}}else{this.snake.unshift(j);this.snake.pop();$("#crawl")[0].play()}}}if(this.playing){this.render();return setTimeout(this.updateGame,500)}};d.prototype.endGame=function(){this.playing=false;$("#hit")[0].play();return this.flashing(this.countScore)};d.prototype.genFood=function(){var g,j,f,h,e;this.food=[Math.floor(Math.random()*this.width),Math.floor(Math.random()*this.height)];h=this.snake;e=[];for(j=0,f=h.length;j<f;j++){g=h[j];if(g[0]===this.food[0]&&g[1]===this.food[1]){this.genFood();break}else{e.push(void 0)}}return e};d.prototype.render=function(){var f,h,e,g;this.screen.erase();g=this.snake;for(h=0,e=g.length;h<e;h++){f=g[h];this.screen.drawPixel(f[0],f[1],true)}this.screen.drawPixel(this.food[0],this.food[1]);return this.screen.render()};d.prototype.flashing=function(e){var f=this;this.screen.erase();this.screen.render();return setTimeout(function(){f.render();return setTimeout(function(){f.screen.erase();f.screen.render();return setTimeout(function(){f.render();return setTimeout(function(){f.screen.erase();f.screen.render();return setTimeout(function(){f.render();return setTimeout(function(){f.screen.erase();return e(0)},300)},300)},300)},300)},300)},300)};d.prototype.countScore=function(e){var f=this;if(e<this.snake.length){$("#eat")[0].currentTime=0;$("#eat")[0].play();this.screen.drawPixel(e%5,Math.floor(e/5));this.screen.render();return setTimeout(function(){return f.countScore(++e)},300)}else{return setTimeout(function(){return f.startGame()},2000)}};return d})();$(document).ready(function(){var d;return d=new c(5,5,false)})}).call(this);